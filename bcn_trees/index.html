



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="This is a proof of concept and a pet project for learning python while preparing data for importing it to OpenStreetMap. Although I will start small (importing trees from Barcelona city council), I aim to set the foundations for adding other types of imports that may (or may not) be added in the future.">
      
      
      
        <meta name="author" content="Carlos CÃ¡mara">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="/img/map-24px.svg">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Barcelona's Trees Import - OSM Imports' preparations</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#barcelonas-trees-import-documentation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="OSM Imports' preparations" class="md-header-nav__button md-logo">
          
            <i class="md-icon">map</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              OSM Imports' preparations
            </span>
            <span class="md-header-nav__topic">
              
                Barcelona's Trees Import
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ccamara/osm_imports_preparations/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="OSM Imports' preparations" class="md-nav__button md-logo">
      
        <i class="md-icon">map</i>
      
    </a>
    OSM Imports' preparations
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ccamara/osm_imports_preparations/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../setup/" title="Project Setup" class="md-nav__link">
      Project Setup
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Imports Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Imports Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Barcelona's Trees Import
      </label>
    
    <a href="./" title="Barcelona's Trees Import" class="md-nav__link md-nav__link--active">
      Barcelona's Trees Import
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goals" class="md-nav__link">
    Goals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-sources" class="md-nav__link">
    Data Sources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#licence" class="md-nav__link">
    Licence
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-type" class="md-nav__link">
    Import type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-preparations" class="md-nav__link">
    Data preparations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-workflow" class="md-nav__link">
    Import workflow
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changesets-tagging" class="md-nav__link">
    Changesets' tagging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../sources/api_bcn_trees/" title="API bcn_tres" class="md-nav__link">
      API bcn_tres
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/ccamara/osm_imports_preparations/issues" title="Bug Tracker" class="md-nav__link">
      Bug Tracker
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goals" class="md-nav__link">
    Goals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-sources" class="md-nav__link">
    Data Sources
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#licence" class="md-nav__link">
    Licence
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-type" class="md-nav__link">
    Import type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-preparations" class="md-nav__link">
    Data preparations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#import-workflow" class="md-nav__link">
    Import workflow
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changesets-tagging" class="md-nav__link">
    Changesets' tagging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ccamara/osm_imports_preparations/edit/master/docs/bcn_trees.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="barcelonas-trees-import-documentation">Barcelona's Trees Import documentation<a class="headerlink" href="#barcelonas-trees-import-documentation" title="Permanent link">&para;</a></h1>
<h2 id="goals">Goals<a class="headerlink" href="#goals" title="Permanent link">&para;</a></h2>
<p>The goal is to manually merge and import all the trees' information provided by Barcelona City Council, while testing the scripts for data preparation.</p>
<h2 id="data-sources">Data Sources<a class="headerlink" href="#data-sources" title="Permanent link">&para;</a></h2>
<p>Two datasets provided by Barcelona City Council will be used:</p>
<ul>
<li><a href="https://opendata-ajuntament.barcelona.cat/data/ca/dataset/arbrat-viari">Arbrat viari</a>: Name of the species and geolocation of the trees of the city of Barcelona located on public roads. The information contains, among other data, the scientific name, the common name, the height, the direction and the width of the sidewalk... The trees of the parks are not included. The coordinates are expressed in the ETRS89 reference system. This dataset complemens of Zone trees of the city of Barcelona.
Historical resources which contain data available until the last week of the term are published. The resources are ordered by year and term, information that can be found in the name of the resource.</li>
<li><a href="https://opendata-ajuntament.barcelona.cat/data/ca/dataset/arbrat-zona">Arbrat zona</a>: Name of the species and geolocation of the trees of the city of Barcelona located on public roads. The information contains, among other data, the scientific name, the common name, the height, the direction and the width of the sidewalk... The trees of the parks are not included. The coordinates are expressed in the ETRS89 reference system. This dataset complemens of Street trees of the city of Barcelona.
Historical resources which contain data available until the last week of the term are published. The resources are ordered by year and term, information that can be found in the name of the resource.</li>
</ul>
<h3 id="licence">Licence<a class="headerlink" href="#licence" title="Permanent link">&para;</a></h3>
<p>We have an express authorization from the Barcelona city council for the reuse of open data published on theirs open Government website</p>
<p><img alt="" src="https://wiki.openstreetmap.org/w/images/thumb/9/9a/201801107_AcordOSM_AjuntamentBarcelona_Def.pdf/page1-1240px-201801107_AcordOSM_AjuntamentBarcelona_Def.pdf.jpg" /></p>
<h2 id="import-type">Import type<a class="headerlink" href="#import-type" title="Permanent link">&para;</a></h2>
<p>This import will be done manually, using JOSM to edit the data. Consider using Task Manager.</p>
<h2 id="data-preparations">Data preparations<a class="headerlink" href="#data-preparations" title="Permanent link">&para;</a></h2>
<p>All data preparations will be made automatically by the scripts within this repository. More specifically from <code>import_bcn_trees.py</code>, which in turn imports the functions defined in <code>src/features/bcn_trees.py</code> aimed to convert original tagging into OSM tagging (for a complete documentation of those functions, please refer to the <a href="">API Documentation</a>).</p>
<p>Tagging Conversion table:</p>
<table>
<thead>
<tr>
<th>Original field</th>
<th>Description</th>
<th>OSM tagging</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CODI</code></td>
<td>Internal ID</td>
<td>Not currently imported</td>
<td>Consider importing it, as it may be useful for future data updates.</td>
</tr>
<tr>
<td><code>X_ETRS89</code></td>
<td>X coordinates, ETRS89 format</td>
<td></td>
<td>Not imported</td>
</tr>
<tr>
<td><code>Y_ETRS89</code></td>
<td>Y coordinates, ETRS89 format</td>
<td></td>
<td>Not imported</td>
</tr>
<tr>
<td><code>LATITUD_WGS84</code></td>
<td>Latitude coordinates, WGS84 format</td>
<td></td>
<td>Geometry information. No tagging used.</td>
</tr>
<tr>
<td><code>LONGITUD_WGS84</code></td>
<td>Longitude coordinates, WGS84 format</td>
<td></td>
<td>Geometry information. No tagging used.</td>
</tr>
<tr>
<td><code>TIPUS_ELEMENT</code></td>
<td>Object's type (viari/zona)</td>
<td></td>
<td>Not imported</td>
</tr>
<tr>
<td><code>ESPAI VERD</code></td>
<td>Name of Green space where the tree is located</td>
<td></td>
<td>Not imported</td>
</tr>
<tr>
<td><code>ADRECA</code></td>
<td>Address</td>
<td></td>
<td>Not imported</td>
</tr>
<tr>
<td><code>ALCADA</code></td>
<td>Tree's height. It does not use meters, but categories</td>
<td><code>height</code></td>
<td>height is calculated according to this field, following <a href="https://ajuntament.barcelona.cat/ecologiaurbana/sites/default/files/Plagestioarbratviaribcn_cat.pdf">this documentation</a> (p. 22).</td>
</tr>
<tr>
<td><code>CAT_ESPECIE_ID</code></td>
<td>Species' ID</td>
<td></td>
<td>Not imported</td>
</tr>
<tr>
<td><code>NOM_CIENTIFIC</code></td>
<td>scientific name of the species (popularly known as the Latin name)</td>
<td><code>species</code></td>
<td></td>
</tr>
<tr>
<td><code>NOM_CASTELLA</code></td>
<td>Name in Spanish</td>
<td><code>species:es</code></td>
<td></td>
</tr>
<tr>
<td><code>NOM_CATALA</code></td>
<td>Name in Catalan</td>
<td><code>species:ca</code></td>
<td></td>
</tr>
<tr>
<td><code>CATEGORIA_ARBRAT</code></td>
<td>Tree's category. Internal classification according to height and diameter.</td>
<td><code>circumference</code></td>
<td>Not directly imported, but used to calculate <code>circumference</code>, following <a href="https://ajuntament.barcelona.cat/ecologiaurbana/sites/default/files/Plagestioarbratviaribcn_cat.pdf">this documentation</a> (p. 19).</td>
</tr>
<tr>
<td><code>AMPLADA_VORERA</code></td>
<td>Sidewalk's width</td>
<td></td>
<td>Not imported.</td>
</tr>
<tr>
<td><code>DATA_PLANTACIO</code></td>
<td>Date in which the tree was planted</td>
<td><code>planted_date</code></td>
<td></td>
</tr>
<tr>
<td><code>TIPUS_AIGUA</code></td>
<td>Water type</td>
<td></td>
<td>Not imported.</td>
</tr>
<tr>
<td><code>TIPUS_REG</code></td>
<td>Watering mechanism</td>
<td></td>
<td>Not imported.</td>
</tr>
<tr>
<td><code>TIPUS_SUPERFICIE</code></td>
<td>Surface type</td>
<td></td>
<td>Not imported.</td>
</tr>
<tr>
<td><code>TIPUS_SUPORT</code></td>
<td>Support type</td>
<td></td>
<td>Not imported.</td>
</tr>
<tr>
<td><code>COBERTURA_ESCOCELL</code></td>
<td>Whether the Tree pit is covered or not</td>
<td></td>
<td>Not currently imported due to lack of specific tagging, but it would be a nice have to feature.</td>
</tr>
<tr>
<td><code>MIDA_ESCOCELL</code></td>
<td>Tree pit Size</td>
<td></td>
<td>Not currently imported due to lack of specific tagging, but it would be a nice have to feature.</td>
</tr>
</tbody>
</table>
<p>Also, a <code>source=Opendata Ajuntament de Barcelona</code> will be added automatically to all the trees.</p>
<h2 id="import-workflow">Import workflow<a class="headerlink" href="#import-workflow" title="Permanent link">&para;</a></h2>
<ol>
<li>Run <code>import_bcn_trees.py</code> to prepare a single CSV file with all the converted tagging, as specified before. This step only needs to be run once.</li>
<li>Use the CSV file generated in the previous step as datasource.</li>
<li>Create a project in task manager (TODO)</li>
</ol>
<h3 id="changesets-tagging">Changesets' tagging<a class="headerlink" href="#changesets-tagging" title="Permanent link">&para;</a></h3>
<p>We will use the following changeset tags:</p>
<ul>
<li>comment=#Ajuntament de Barcelona Trees' import</li>
<li>import=yes</li>
<li>source=Ajuntament de Barcelona</li>
<li>source:date=* the same that in the dataset</li>
<li>url= (this page)</li>
</ul>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://wiki.openstreetmap.org/wiki/Import/Guidelines">Import Guidelines</a></li>
<li><a href="https://wiki.openstreetmap.org/wiki/ES:Importaci%C3%B3n/Directrices">Procedimiento para preparar importaciones</a> (in Spanish)</li>
<li><a href="https://wiki.openstreetmap.org/wiki/Import_information_and_care_points_for_women_and_LGTBI_collectives_in_Catalunya">Sample import documentation project</a> (thanks Lanxana!)</li>
</ul>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../setup/" title="Project Setup" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Project Setup
              </span>
            </div>
          </a>
        
        
          <a href="../sources/api_bcn_trees/" title="API bcn_tres" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                API bcn_tres
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>